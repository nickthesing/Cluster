<template name="chatLayout">
    <div class="container">
        {{> yield}}
    </div>
</template>

<template name="chatLoading">
    <h1>Loading chat...</h1>
</template>

<template name="chatNotFound">
    <h1>Oops. Chat not found</h1>
</template>

<template name="chatNotSpecified">
    <h1>No name specified</h1>
</template>

<template name="chatLoaded">
    {{#if name}}
        {{> chat}}
    {{else}}
        {{> chatNotFound}}
    {{/if}}
</template>

<template name="chat">
    <h1>Chat: [{{name}}]</h1>

    <div class="cluster-chat">
    <ul>
      {{#each lines}}
        {{> line}}
      {{/each}}
    </ul>
    </div>

    <div class="add-line">
        <form class="new-chatline js-create-line" autocomplete="off">
          <input type="text" name="text" placeholder="..." />
          <button type="submit" class="btn btn-secondary">Enter</button>
        </form>
    </div>
</template>

<template name="line">
    <li>
    {{#if start}}
        <p class="first-line">
            Chat created by {{username}} on {{parseDate createdAt}}
        </p>
    {{else}}
        <p>
            <span class="line-author">{{username}}</span> - {{text}}
            <span class="line-date">{{parseDate createdAt}}</span>
        </p>
    {{/if}}
    </li>
</template>
